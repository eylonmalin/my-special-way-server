"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const user_db_model_1 = require("../../models/user.db.model");
const get_1 = require("../../utils/get");
const permission_strategy_1 = require("./permission.strategy");
class PermissionFactory {
    static get(user) {
        const role = get_1.Get.getValue(user, 'role');
        switch (role) {
            case user_db_model_1.UserRole.PRINCIPLE:
                return PermissionFactory.principlePermission;
            case user_db_model_1.UserRole.TEACHER:
                return PermissionFactory.teacherPermission;
            case user_db_model_1.UserRole.STUDENT:
                return PermissionFactory.studentPermission;
            default:
                return PermissionFactory.noPermission;
        }
    }
}
PermissionFactory.principlePermission = new permission_strategy_1.PrinciplePermission();
PermissionFactory.teacherPermission = new permission_strategy_1.TeacherPermission();
PermissionFactory.studentPermission = new permission_strategy_1.StudentPermission();
PermissionFactory.noPermission = new permission_strategy_1.NoPermission();
exports.PermissionFactory = PermissionFactory;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL2R2ZXJub3Zza3kvcHJvZ3JhbW1pbmcvbXktc3BlY2lhbC13YXkvbXktc3BlY2lhbC13YXktc2VydmVyL3NyYy9tb2R1bGVzL3Blcm1pc3Npb25zL3Blcm1pc3Npb24tZmFjdG9yeS50cyIsInNvdXJjZXMiOlsiL1VzZXJzL2R2ZXJub3Zza3kvcHJvZ3JhbW1pbmcvbXktc3BlY2lhbC13YXkvbXktc3BlY2lhbC13YXktc2VydmVyL3NyYy9tb2R1bGVzL3Blcm1pc3Npb25zL3Blcm1pc3Npb24tZmFjdG9yeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLDhEQUFvRDtBQUNwRCx5Q0FBb0M7QUFFcEMsK0RBQThHO0FBRTlHO0lBTUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxJQUErQjtRQUN0QyxNQUFNLElBQUksR0FBeUIsU0FBRyxDQUFDLFFBQVEsQ0FBVyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDeEUsUUFBUSxJQUFJLEVBQUU7WUFDVixLQUFLLHdCQUFRLENBQUMsU0FBUztnQkFDbkIsT0FBTyxpQkFBaUIsQ0FBQyxtQkFBbUIsQ0FBQztZQUNqRCxLQUFLLHdCQUFRLENBQUMsT0FBTztnQkFDakIsT0FBTyxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQztZQUMvQyxLQUFLLHdCQUFRLENBQUMsT0FBTztnQkFDakIsT0FBTyxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQztZQUMvQztnQkFDSSxPQUFRLGlCQUFpQixDQUFDLFlBQVksQ0FBQztTQUM5QztJQUNMLENBQUM7O0FBakJjLHFDQUFtQixHQUF3QixJQUFJLHlDQUFtQixFQUFFLENBQUM7QUFDckUsbUNBQWlCLEdBQXNCLElBQUksdUNBQWlCLEVBQUUsQ0FBQztBQUMvRCxtQ0FBaUIsR0FBc0IsSUFBSSx1Q0FBaUIsRUFBRSxDQUFDO0FBQy9ELDhCQUFZLEdBQWlCLElBQUksa0NBQVksRUFBRSxDQUFDO0FBSm5FLDhDQW1CQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7VXNlclRva2VuUHJvZmlsZX0gZnJvbSAnLi4vLi4vbW9kZWxzL3VzZXItdG9rZW4tcHJvZmlsZS5tb2RlbCc7XHJcbmltcG9ydCB7VXNlclJvbGV9IGZyb20gJy4uLy4uL21vZGVscy91c2VyLmRiLm1vZGVsJztcclxuaW1wb3J0IHtHZXR9IGZyb20gJy4uLy4uL3V0aWxzL2dldCc7XHJcbmltcG9ydCB7UGVybWlzc2lvbnN9IGZyb20gJy4vcGVybWlzc2lvbi5pbnRlcmZhY2UnO1xyXG5pbXBvcnQge05vUGVybWlzc2lvbiwgUHJpbmNpcGxlUGVybWlzc2lvbiwgU3R1ZGVudFBlcm1pc3Npb24sIFRlYWNoZXJQZXJtaXNzaW9ufSBmcm9tICcuL3Blcm1pc3Npb24uc3RyYXRlZ3knO1xyXG5cclxuZXhwb3J0IGNsYXNzIFBlcm1pc3Npb25GYWN0b3J5IHtcclxuICAgIHByaXZhdGUgc3RhdGljIHByaW5jaXBsZVBlcm1pc3Npb246IFByaW5jaXBsZVBlcm1pc3Npb24gPSBuZXcgUHJpbmNpcGxlUGVybWlzc2lvbigpO1xyXG4gICAgcHJpdmF0ZSBzdGF0aWMgdGVhY2hlclBlcm1pc3Npb246IFRlYWNoZXJQZXJtaXNzaW9uID0gbmV3IFRlYWNoZXJQZXJtaXNzaW9uKCk7XHJcbiAgICBwcml2YXRlIHN0YXRpYyBzdHVkZW50UGVybWlzc2lvbjogU3R1ZGVudFBlcm1pc3Npb24gPSBuZXcgU3R1ZGVudFBlcm1pc3Npb24oKTtcclxuICAgIHByaXZhdGUgc3RhdGljIG5vUGVybWlzc2lvbjogTm9QZXJtaXNzaW9uID0gbmV3IE5vUGVybWlzc2lvbigpO1xyXG5cclxuICAgIHN0YXRpYyBnZXQodXNlcjogb2JqZWN0IHwgVXNlclRva2VuUHJvZmlsZSk6IFBlcm1pc3Npb25zIHtcclxuICAgICAgICBjb25zdCByb2xlOiBVc2VyUm9sZSB8IHVuZGVmaW5lZCA9IEdldC5nZXRWYWx1ZTxVc2VyUm9sZT4odXNlciwgJ3JvbGUnKTtcclxuICAgICAgICBzd2l0Y2ggKHJvbGUpIHtcclxuICAgICAgICAgICAgY2FzZSBVc2VyUm9sZS5QUklOQ0lQTEU6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVybWlzc2lvbkZhY3RvcnkucHJpbmNpcGxlUGVybWlzc2lvbjtcclxuICAgICAgICAgICAgY2FzZSBVc2VyUm9sZS5URUFDSEVSOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFBlcm1pc3Npb25GYWN0b3J5LnRlYWNoZXJQZXJtaXNzaW9uO1xyXG4gICAgICAgICAgICBjYXNlIFVzZXJSb2xlLlNUVURFTlQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUGVybWlzc2lvbkZhY3Rvcnkuc3R1ZGVudFBlcm1pc3Npb247XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIFBlcm1pc3Npb25GYWN0b3J5Lm5vUGVybWlzc2lvbjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl19